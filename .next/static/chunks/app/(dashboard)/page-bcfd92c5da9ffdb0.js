(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{1978:function(e,t,a){Promise.resolve().then(a.bind(a,119))},7710:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var n=a(7437),i=a(492),l=a(2688),r=a(6387),s=a(2265);function d(){let{rowsInfo:e,selectedInfo:t,setSelectedInfo:a,setRowsInfo:d,onMounted:o,isMounted:u,infoId:c,setInfoId:h}=(0,l.N)(),[f,g]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{o(),(async()=>{try{g(!0);let e=await fetch("/api/info");if(!e.ok)throw Error("Failed to fetch info: ".concat(e.statusText));let t=await e.json();d(t.all),0===c&&t.latest&&h(t.latest.id)}catch(e){alert("Failed to fetch info. Please try again later.")}finally{g(!1)}})()},[d,c,h,o]),(0,s.useEffect)(()=>{(async()=>{if(0!==c)try{g(!0);let e=await fetch("/api/info/".concat(c));if(!e.ok)throw Error("Failed to fetch info by ID: ".concat(e.statusText));let t=await e.json();a(Array.isArray(t)?t[0]:t)}catch(e){alert("Failed to fetch selected info. Please try again later.")}finally{g(!1)}})()},[c,a]),!u||f)?(0,n.jsx)(i.Z,{}):(0,n.jsxs)("div",{style:{position:"relative",padding:"20px"},children:[(0,n.jsx)(r.Z,{variant:"h3",align:"center",style:{color:"#007BFF",fontWeight:"bold"},children:"Pengumuman"}),(0,n.jsx)("div",{style:{marginBottom:"40px",textAlign:"center"},children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{variant:"h5",children:t.judul||"No announcement available"}),(0,n.jsx)(r.Z,{children:t.konten||"No content available"})]}):(0,n.jsx)(r.Z,{children:"No content available"})}),(0,n.jsx)(r.Z,{variant:"body2",sx:{position:"absolute",bottom:0,right:0,margin:"10px",textAlign:"right",whiteSpace:"pre-line",fontSize:"0.9rem"},children:t?(e=>{if(!e)return"No date available";let t=new Date(e),a=new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"long",year:"numeric"}).format(t);return"Majalaya, ".concat(a,"\nHRD PT. SIPATEX")})(t.date):"No date available"})]})}},119:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(7437),i=a(2265),l=a(6387),r=a(8112),s=a(561),d=a(3410),o=a(7710),u=a(1327),c=a(20),h=a(6746),f=a(2187),g=a(2069),m=a(2688),x=a(492);function p(){let{rowsInfo:e,isMounted:t,onMounted:a,setInfoId:p,infoId:j}=(0,m.N)(),[w,v]=(0,i.useState)([]),[y,b]=(0,i.useState)([]),[Z,k]=(0,i.useState)(1),[I,N]=(0,i.useState)([]),S=e=>{let t=new Date(e);return new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)};(0,i.useEffect)(()=>{a(),(async()=>{try{let e=await fetch("/api/schedule/".concat(Z));if(!e.ok)throw Error("Failed to fetch schedule: ".concat(e.statusText));let t=await e.json();if("object"!=typeof t||Array.isArray(t))throw Error("Invalid data format");let a=[],n=[];Object.entries(t).forEach(e=>{let[t,i]=e;Array.isArray(i)&&i.forEach(e=>{var i,l,r;e.formattedDate=S(e.date);let s=a.findIndex(t=>t.id===e.id);if(s>-1)a[s][t]=e.departement,a[s].status=null!==(i=e.keterangan)&&void 0!==i?i:"";else{let n={id:e.id,senin:"senin"===t?e.departement:"",selasa:"selasa"===t?e.departement:"",rabu:"rabu"===t?e.departement:"",kamis:"kamis"===t?e.departement:"",jumat:"jumat"===t?e.departement:"",sabtu:"sabtu"===t?e.departement:"",minggu:"minggu"===t?e.departement:"",status:null!==(l=e.keterangan)&&void 0!==l?l:""};a.push(n)}n.some(t=>t.groupId===e.formattedDate)||n.push({groupId:null!==(r=e.formattedDate)&&void 0!==r?r:"",description:"",children:[{field:t}]}),N(t=>[...t,e])})}),v(a),b(n)}catch(e){alert("Failed to fetch schedules. Please try again later.")}})()},[Z,a]);let E=async e=>{p(parseInt(e.target.value,10))};return t?(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(o.Z,{}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",overflowX:"auto",height:"100vh",padding:2,width:"100%"},children:(0,n.jsxs)(d.Z,{elevation:20,sx:{height:"80%",width:"92%"},children:[(0,n.jsxs)(u.Z,{sx:{margin:1,padding:0,width:"18ch"},children:[(0,n.jsx)(c.Z,{id:"weekly-select-label",children:"Pilih Minggu"}),(0,n.jsxs)(h.Z,{labelId:"weekly-select-label",id:"weekly-select",value:Z,label:"Pilih Minggu",onChange:e=>{k(Number(e.target.value))},children:[(0,n.jsx)(f.Z,{value:1,children:"Minggu ke 1"}),(0,n.jsx)(f.Z,{value:2,children:"Minggu ke 2"}),(0,n.jsx)(f.Z,{value:3,children:"Minggu ke 3"}),(0,n.jsx)(f.Z,{value:4,children:"Minggu ke 4"})]})]}),(0,n.jsxs)(u.Z,{sx:{margin:1,padding:0,right:0,width:"50%"},children:[(0,n.jsx)(c.Z,{id:"select-title-label",children:"Info Pengumuman"}),(0,n.jsx)(h.Z,{labelId:"select-title-label",id:"select-title",value:j?String(j):"",onChange:E,label:"Pilih Judul",children:e.map(e=>(0,n.jsx)(f.Z,{value:String(e.id),children:e.judul},e.id))})]}),(0,n.jsx)(g.Z,{sx:{height:500,width:"100%",[".".concat(r._.cell,".Libur")]:{backgroundColor:"#d47483",color:"#1a3e72",fontWeight:"500"},[".".concat(r._.cell,".Masuk")]:{backgroundColor:"rgba(157, 255, 118, 0.49)",color:"#1a3e72",fontWeight:"500"}},children:(0,n.jsx)(s._,{rows:w,columns:[{field:"senin",headerName:"Senin",width:150},{field:"selasa",headerName:"Selasa",width:150},{field:"rabu",headerName:"Rabu",width:150},{field:"kamis",headerName:"Kamis",width:150},{field:"jumat",headerName:"Jum'at",width:150},{field:"sabtu",headerName:"Sabtu",width:150},{field:"minggu",headerName:"Minggu",width:150}],initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},pageSizeOptions:[5,10],columnGroupingModel:y,sx:{border:0},getCellClassName:e=>{if(!e.value)return"";let t=I.find(t=>t.departement===e.value&&t.day===e.field);return t?"Masuk"===t.keterangan?"Masuk":"Libur":""}})})]})})]}):(0,n.jsx)(x.Z,{})}},492:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(7437),i=a(1988);function l(){return(0,n.jsxs)("div",{style:{padding:"5px",justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(i.Z,{variant:"rounded",width:310,height:60}),(0,n.jsx)(i.Z,{variant:"text",sx:{fontSize:"0.9rem",marginTop:"10px",width:"20%"}}),(0,n.jsx)(i.Z,{variant:"rectangular",width:"100%",height:150,sx:{marginTop:"20px"}})]})}},2688:function(e,t,a){"use strict";a.d(t,{N:function(){return n}});let n=(0,a(3011).U)(e=>({isOpen:!1,isEdit:!1,isMounted:!1,rowsInfo:[],selectedInfo:null,infoId:0,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1}),onEdit:()=>e({isEdit:!0}),onMounted:()=>e({isMounted:!0}),setRowsInfo:t=>e({rowsInfo:t}),setSelectedInfo:t=>e({selectedInfo:t}),setInfoId:t=>e({infoId:t})}))}},function(e){e.O(0,[587,811,799,971,117,744],function(){return e(e.s=1978)}),_N_E=e.O()}]);